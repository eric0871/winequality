<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Interactive component | Vinho Verde Red Wine Quality Analysis</title>
  <meta name="description" content="Chapter 6 Interactive component | Vinho Verde Red Wine Quality Analysis" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Interactive component | Vinho Verde Red Wine Quality Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Interactive component | Vinho Verde Red Wine Quality Analysis" />
  
  
  

<meta name="author" content="Sally Bao &amp; Eric Cheng &amp; Qiran Li &amp; Zhibin Li" />


<meta name="date" content="2020-12-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Wine Quality</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a><ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#attributes-and-outcome"><i class="fa fa-check"></i><b>2.1</b> Attributes and Outcome</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#number-of-records"><i class="fa fa-check"></i><b>2.2</b> Number of Records</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#types-of-variables"><i class="fa fa-check"></i><b>2.3</b> Types of Variables</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#load-data"><i class="fa fa-check"></i><b>3.1</b> Load Data</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#data-statistics"><i class="fa fa-check"></i><b>3.2</b> Data Statistics</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#categorize-quality-column"><i class="fa fa-check"></i><b>3.3</b> Categorize <code>quality</code> column</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a><ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#heatmap"><i class="fa fa-check"></i><b>4.1</b> Heatmap</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#vis_miss-from-visdat"><i class="fa fa-check"></i><b>4.2</b> <code>vis_miss()</code> from <strong>visdat</strong></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#distribution-and-outliers"><i class="fa fa-check"></i><b>5.1</b> Distribution and Outliers</a><ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#histogram-for-attributes"><i class="fa fa-check"></i><b>5.1.1</b> Histogram for Attributes</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#boxplot-for-attributes"><i class="fa fa-check"></i><b>5.1.2</b> Boxplot for Attributes</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#pairwise-attribute-correlation"><i class="fa fa-check"></i><b>5.2</b> Pairwise Attribute Correlation</a><ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#scatterplot-matrix"><i class="fa fa-check"></i><b>5.2.1</b> Scatterplot Matrix</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#correlation-heatmap"><i class="fa fa-check"></i><b>5.2.2</b> Correlation Heatmap</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#correlation-between-quality-and-attributes"><i class="fa fa-check"></i><b>5.3</b> Correlation between Quality and Attributes</a><ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#sweetness-and-sourness-v.s.-quality"><i class="fa fa-check"></i><b>5.3.1</b> Sweetness and Sourness v.s. Quality</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#alcohol-v.s.-quality"><i class="fa fa-check"></i><b>5.3.2</b> Alcohol v.s. Quality</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#pair-attributes-v.s.-quality"><i class="fa fa-check"></i><b>5.4</b> Pair Attributes v.s. Quality</a><ul>
<li class="chapter" data-level="5.4.1" data-path="results.html"><a href="results.html#alcohol-volatile-acidity"><i class="fa fa-check"></i><b>5.4.1</b> Alcohol + Volatile Acidity</a></li>
<li class="chapter" data-level="5.4.2" data-path="results.html"><a href="results.html#alcohol-chlorides"><i class="fa fa-check"></i><b>5.4.2</b> Alcohol + Chlorides</a></li>
<li class="chapter" data-level="5.4.3" data-path="results.html"><a href="results.html#volatile-acidity-chlorides"><i class="fa fa-check"></i><b>5.4.3</b> Volatile Acidity + Chlorides</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="results.html"><a href="results.html#parallel-coordinate-plot"><i class="fa fa-check"></i><b>5.5</b> Parallel Coordinate Plot</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Vinho Verde Red Wine Quality Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Interactive component</h1>
<script src="https://d3js.org/d3.v4.js"></script>
<div id="my_dataviz">

</div>
<p>
Please select X:
</p>
<p><select id="selectx"> <option value="alcohol">alcohol</option> <option value="pH">pH</option> <option value="chlorides">chlorides</option> <option value="citric_acid">citric acid</option> <option value="density">density</option> <option value="fixed_acidity">fixed acidity</option> <option value="free_sulfur_dioxide">free sulfur dioxide</option> <option value="residual_sugar">residual sugar</option> <option value="total_sulfur_dioxide">total sulfur dioxide</option> <option value="volatile_acidity">volatile acidity</option> <option value="quality">quality</option> </select></p>
<p>
Please select Y:
</p>
<p><select id="selecty"> <option value="pH">pH</option> <option value="alcohol">alcohol</option> <option value="chlorides">chlorides</option> <option value="citric_acid">citric acid</option> <option value="density">density</option> <option value="fixed_acidity">fixed acidity</option> <option value="free_sulfur_dioxide">free sulfur dioxide</option> <option value="residual_sugar">residual sugar</option> <option value="total_sulfur_dioxide">total sulfur dioxide</option> <option value="volatile_acidity">volatile acidity</option> <option value="quality">quality</option> </select></p>
<button id="submit">
Submit
</button>
<button id="restart">
Restart
</button>
<script>
  var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

  var svg = d3.select("#my_dataviz")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")




  var rowConverter = function (d) {
    return {
    alcohol: +d.alcohol,
    chlorides: +d.chlorides,
    citric_acid: +d.citric_acid,
    density: +d.density,
    fixed_acidity: +d.fixed_acidity,
    free_sulfur_dioxide: +d.free_sulfur_dioxide,
    pH: +d.pH,
    quality: +d.quality,
    residual_sugar: +d.residual_sugar,
    sulphates: +d.sulphates,
    total_sulfur_dioxide: +d.total_sulfur_dioxide,
    volatile_acidity: +d.volatile_acidity,
    quality_category: d.quality_category,
    color: d.color
    }
};




  var parse = function (data) {
    
    var x = d3.scaleLinear()
      .domain([8, 15])
      .range([0, width]);
    
    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    
    var y = d3.scaleLinear()
    .domain([2, 5])
    .range([height, 0]);
    
    svg.append("g")
      .call(d3.axisLeft(y));


    var selectedOption1 = "alcohol"
    var selectedOption2 = "pH"

    d3.select("select#selectx").on("change", function(d){
      selectedOption1 = d3.select(this).property("value")
    
    })

    d3.select("select#selecty").on("change", function(d){
      selectedOption2 = d3.select(this).property("value")
    
    })


    d3.select("#submit").on("click", function () {
    
      var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 460 - margin.left - margin.right,
          height = 400 - margin.top - margin.bottom;

    
      var svg = d3.select("#my_dataviz")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")")
    
      if (selectedOption1 == "alcohol") {
        var x = d3.scaleLinear()
          .domain([8, 15])
          .range([0, width]);
          
        svg.append("g")
          .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "chlorides") {
      var x = d3.scaleLinear()
        .domain([0.00, 0.70])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "citric_acid") {
      var x = d3.scaleLinear()
        .domain([0, 1])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "density") {
      var x = d3.scaleLinear()
        .domain([0.9900, 1.0050])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "fixed_acidity") {
      var x = d3.scaleLinear()
        .domain([4, 16])
        .range([0, width]);
      //console.log(x)
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "free_sulfur_dioxide") {
      var x = d3.scaleLinear()
        .domain([0, 100])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "pH") {
      var x = d3.scaleLinear()
        .domain([2, 5])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "quality") {
      var x = d3.scaleLinear()
        .domain([0, 10])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "residual_sugar") {
      var x = d3.scaleLinear()
        .domain([0, 16])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else if (selectedOption1 == "sulphates") {
      var x = d3.scaleLinear()
        .domain([0, 2])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

    } else if (selectedOption1 == "total_sulfur_dioxide") {
      var x = d3.scaleLinear()
        .domain([0, 300])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    } else {
      var x = d3.scaleLinear()
        .domain([0, 2])
        .range([0, width]);
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));
    }



      if (selectedOption2 == "alcohol") {
        var y = d3.scaleLinear()
          .domain([8, 15])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "chlorides") {
        var y = d3.scaleLinear()
          .domain([0.00, 0.70])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "citric_acid") {
        var y = d3.scaleLinear()
          .domain([0, 1])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "density") {
        var y = d3.scaleLinear()
          .domain([0.9900, 1.0050])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "fixed_acidity") {
        var y = d3.scaleLinear()
          .domain([4, 16])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "free_sulfur_dioxide") {
        var y = d3.scaleLinear()
          .domain([0, 100])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "pH") {
        var y = d3.scaleLinear()
          .domain([2, 5])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "quality") {
        var y = d3.scaleLinear()
          .domain([0, 10])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "residual_sugar") {
        var y = d3.scaleLinear()
          .domain([0, 16])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "sulphates") {
        var y = d3.scaleLinear()
          .domain([0, 2])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else if (selectedOption2 == "total_sulfur_dioxide") {
        var y = d3.scaleLinear()
          .domain([0, 300])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      } else {
        var y = d3.scaleLinear()
          .domain([0, 2])
          .range([height, 0]);
        svg.append("g")
          .call(d3.axisLeft(y));
      }

      svg.append('g')
        .selectAll("dot")
        .data(data)
        .enter()
        .append("circle")
          .attr("cx",  d => x(d[selectedOption1]))
          .attr("cy", d => y(d[selectedOption2]))
          .attr("r", 1.5)
          .style("fill", d => d.color);


      // text label for the x axis
      svg.append("text")
          .attr("transform",
                "translate(" + (width/2) + " ," +
                               (height + margin.top + 20) + ")")
          .style("text-anchor", "middle")
          .text(selectedOption1);

      // text label for the y axis
      svg.append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 0 - margin.left)
          .attr("x",0 - (height / 2))
          .attr("dy", "1em")
          .style("text-anchor", "middle")
          .text(selectedOption2);

      var title = selectedOption2 + " vs " + selectedOption1;
      svg.append("text")
        .attr("x", (width / 2))
        .attr("y", 0 - (margin.top/10000))
        .attr("text-anchor", "middle")
        .style("font-size", "15px")
        .text(title);

      svg.append("circle").attr("cx",300).attr("cy",30).attr("r", 2).style("fill", "red")
      svg.append("circle").attr("cx",300).attr("cy",60).attr("r", 2).style("fill", "green")
      svg.append("circle").attr("cx",300).attr("cy",90).attr("r", 2).style("fill", "blue")
      svg.append("text").attr("x", 320).attr("y", 30).text("poor").style("font-size", "15px").attr("alignment-baseline","middle")
      svg.append("text").attr("x", 320).attr("y", 60).text("avg").style("font-size", "15px").attr("alignment-baseline","middle")
      svg.append("text").attr("x", 320).attr("y", 90).text("good").style("font-size", "15px").attr("alignment-baseline","middle")

  });

  d3.select("#restart").on("click", function () {
    d3.selectAll('svg').remove();
  });



  // Add dots
  svg.append('g')
    .selectAll("dot")
    .data(data)
    .enter()
    .append("circle")
      .attr("cx",  d => x(d[selectedOption1]))
      .attr("cy", d => y(d[selectedOption2]))
      .attr("r", 1.5)
      .style("fill", d => d.color);

  // text label for the x axis
  svg.append("text")
      .attr("transform",
            "translate(" + (width/2) + " ," +
                           (height + margin.top + 20) + ")")
      .style("text-anchor", "middle")
      .text("alcohol");

  // text label for the y axis
  svg.append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 0 - margin.left)
      .attr("x",0 - (height / 2))
      .attr("dy", "1em")
      .style("text-anchor", "middle")
      .text("pH");

  svg.append("text")
    .attr("x", (width / 2))
    .attr("y", 0 - (margin.top/10000))
    .attr("text-anchor", "middle")
    .style("font-size", "15px")
    .text("pH vs alcohol");

  svg.append("circle").attr("cx",300).attr("cy",30).attr("r", 2).style("fill", "red")
  svg.append("circle").attr("cx",300).attr("cy",60).attr("r", 2).style("fill", "green")
  svg.append("circle").attr("cx",300).attr("cy",90).attr("r", 2).style("fill", "blue")
  svg.append("text").attr("x", 320).attr("y", 30).text("poor").style("font-size", "15px").attr("alignment-baseline","middle")
  svg.append("text").attr("x", 320).attr("y", 60).text("avg").style("font-size", "15px").attr("alignment-baseline","middle")
  svg.append("text").attr("x", 320).attr("y", 90).text("good").style("font-size", "15px").attr("alignment-baseline","middle")
}

d3.csv("https://raw.githubusercontent.com/sallytt22/winequality/main/resource/winequality-red-transform.csv",
rowConverter,parse)
</script>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sallytt22/winequality/edit/main/06-interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/sallytt22/winequality/blob/main/06-interactive.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
